{% extends "base.html" %}

{% block title %}Add Questions - {{ round_obj.title }}{% endblock %}

{% block content %}
<div class="row mt-4">
    <div class="col-lg-10 mx-auto">
        <div class="card">
            <div class="card-header">
                <h4><i class="fas fa-question-circle me-2"></i>Add Questions to "{{ round_obj.title }}"</h4>
                <p class="mb-0 text-muted">Round Label: {{ round_obj.round_label }}</p>
            </div>
            <div class="card-body">
                <form method="POST" id="questionsForm">
                    <div id="questionsContainer">
                        {% for i in range(6) %}
                        <div class="question-block mb-4 p-3 border rounded">
                            <h6>Question {{ i + 1 }}</h6>
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="mb-3">
                                        <label class="form-label">Question Text</label>
                                        <textarea name="question_text" class="form-control" rows="2" placeholder="Enter your question here..."></textarea>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label class="form-label">Points</label>
                                        <input type="number" name="points" class="form-control" value="1" min="1" max="10">
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Answer</label>
                                <textarea name="answer_text" class="form-control" rows="2" placeholder="Enter the answer here..."></textarea>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    
                    <div class="d-flex gap-2 mb-3">
                        <button type="button" class="btn btn-outline-primary" onclick="addQuestion()">
                            <i class="fas fa-plus me-1"></i>Add Another Question
                        </button>
                        <button type="button" class="btn btn-outline-danger" onclick="removeQuestion()">
                            <i class="fas fa-minus me-1"></i>Remove Last Question
                        </button>
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save me-1"></i>Save Questions
                        </button>
                        <a href="{{ url_for('rounds.view', round_id=round_obj.id) }}" class="btn btn-secondary">
                            <i class="fas fa-eye me-1"></i>View Round
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
let questionCount = 6;

function addQuestion() {
    questionCount++;
    const container = document.getElementById('questionsContainer');
    const newQuestion = document.createElement('div');
    newQuestion.className = 'question-block mb-4 p-3 border rounded';
    newQuestion.innerHTML = `
        <h6>Question ${questionCount}</h6>
        <div class="row">
            <div class="col-md-8">
                <div class="mb-3">
                    <label class="form-label">Question Text</label>
                    <textarea name="question_text" class="form-control" rows="2" placeholder="Enter your question here..."></textarea>
                </div>
            </div>
            <div class="col-md-4">
                <div class="mb-3">
                    <label class="form-label">Points</label>
                    <input type="number" name="points" class="form-control" value="1" min="1" max="10">
                </div>
            </div>
        </div>
        <div class="mb-3">
            <label class="form-label">Answer</label>
            <textarea name="answer_text" class="form-control" rows="2" placeholder="Enter the answer here..."></textarea>
        </div>
    `;
    container.appendChild(newQuestion);
}

function removeQuestion() {
    if (questionCount > 1) {
        const container = document.getElementById('questionsContainer');
        container.removeChild(container.lastElementChild);
        questionCount--;
    }
}
</script>
{% endblock %}
